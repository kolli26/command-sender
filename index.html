<!DOCTYPE html>
<html>

<head>
    <title>Command Sender</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <h2 class="rainbow">Press this button to use <i>Command Sender</i></h2>
    <div id="form">
        <label for="cid">Voice channel id:</label>
        <input type="text" id="cid" name="cid">
        <br>
        <br>
        <label for="gids">Guild Name:</label>
        <select name="gids" id="selectgids">
            <option value="none">none</option>
            <option value="https://discord.com/api/webhooks/857196303801122836/_ld-DdBDfNDQTzr000iTSSjyecuIoyZGHdVq19eZy9hgD48ltECVjKz1CJ9mNMFU9CXR">9.P</option>
            <option value="https://discord.com/api/webhooks/857244971881857044/bDFAJoN0tzwFyk2L7ImrqppYgKWFrEncfp8ZZQKuX2IeAY0WIdxt582o43pKndugG30N">Sea of Oof</option>
        </select>
        <br>
        <br id="err4">
        <label id="err" class="err">Must be number!</label>
        <br id="err2" class="err">
        <br id="err3" class="err">
        <label for="cname">Command name:</label>
        <input type="text" id="cname" name="cname">
        <br>
        <br>
        <button id="submitButton" class="button" onclick="sendCommand()">Send Command</Command></button>
    </div>
</body>

</html>
<script>
    var input = document.getElementById("cid");
    // Execute a function when the user releases a key on the keyboard
    input.addEventListener("keyup", function(event) {
        // Number 13 is the "Enter" key on the keyboard
        if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("submitButton").click();
            input.value = ""
        }
    });

    // function checkNum() {
    //     const value = document.getElementById("gid").value
    //     console.log(value)
    //     if (value !== "") {
    //         document.getElementById("selectgids").disabled = true
    //         document.getElementById("selectgids").style.borderColor = "crimson"
    //     } else {
    //         document.getElementById("selectgids").disabled = false
    //         document.getElementById("selectgids").style.borderColor = "rgb(0, 255, 255)"
    //     }
    //     if (isNaN(value) === true) {
    //         document.getElementById("err").style.display = "block"
    //         document.getElementById("err2").style.display = "block"
    //         document.getElementById("err4").style.display = "none"
    //         document.getElementById("submitButton").disabled = true
    //         document.getElementById("submitButton").style.borderColor = "crimson"
    //     } else {
    //         document.getElementById("err").style.display = "none"
    //         document.getElementById("err2").style.display = "none"
    //         document.getElementById("err4").style.display = "block"
    //         document.getElementById("submitButton").disabled = false
    //         document.getElementById("submitButton").style.borderColor = "rgb(0, 255, 255)"
    //     }
    // }

    function sendCommand() {
        var myHeaders = new Headers();
        myHeaders.append("Cookie", "__dcfduid=b84ae564190346e69b1981061304a72a");

        var formdata = new FormData();
        formdata.append("content", `,${document.getElementById("cname").value} ${document.getElementById("cid").value}`);

        var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: formdata,
        redirect: 'follow'
        };

        fetch(document.getElementById("selectgids").value, requestOptions)
        .then(response => response.text())
        .then(result => console.log(result))
        .catch(error => console.log('error', error));
    }
</script>
